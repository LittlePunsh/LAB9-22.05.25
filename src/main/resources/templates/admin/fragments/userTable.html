<!-- src/main/resources/templates/admin/fragments/userTable.html -->
<div th:fragment="userSection"> <!-- Определяем фрагмент с именем "userSection" -->
    <h2 class="mt-5 mb-3">Управление Пользователями</h2>

    <!-- Кнопка Добавить Пользователя -->
    <a th:href="@{/admin/users/add}" class="btn btn-primary mb-3">Добавить Нового Пользователя</a>

    <table class="table table-striped table-bordered table-hover">
        <thead class="table-dark">
        <tr>
            <th>ID</th>
            <th>Имя пользователя</th>
            <th>Email</th>
            <th>Роль</th>
            <th>Действия</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="user : ${usersData}">
            <td th:text="${user.id}">1</td>
            <td th:text="${user.username}">username</td>
            <td th:text="${user.email}">email@example.com</td>
            <td th:text="${user.role}">user</td>
            <td>
                <!-- Кнопка Редактировать пользователя -->
                <a th:href="@{/admin/users/edit/{id}(id=${user.id})}" class="btn btn-sm btn-warning">Редактировать</a>

                <!-- Форма для кнопки Удалить пользователя (мягкое удаление) -->
                <form th:action="@{/admin/users/delete/{id}(id=${user.id})}" method="post" style="display:inline;">
                    <button type="submit" class="btn btn-sm btn-danger"
                            th:disabled="${user.id == loggedInUser.id}"
                            onclick="return confirm('Вы уверены, что хотите удалить этого пользователя?')"
                    >Удалить</button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
</div>